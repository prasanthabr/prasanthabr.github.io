{{- define "main" }}

<header class="page-header">
  {{- partial "breadcrumbs.html" . }}
  <h1>{{ .Title | markdownify }}</h1>
  {{- if .Description }}
  <span class="post-description">{{ .Description | markdownify }}</span>
  {{- else }}
  <span class="post-description">{{ .Pages.Len }} items</span>
  {{- end }}
</header>

{{- if .Content }}
<div class="post-content">
  {{ .Content }}
</div>
{{- end }}

{{- if .Pages }}
<div class="note-list">
  {{- range .Pages }}
  <article class="note-card">
    <header class="note-card__header">
      <h2 class="note-card__title">
        <a href="{{ .Permalink }}">{{ .Title }}</a>
      </h2>
      <div class="post-meta">
        <span>{{ .Date | time.Format ":date_medium" }}</span>
        {{- if .Params.lastmod }}
        <span>&middot; Updated {{ .Params.lastmod | time.Format ":date_medium" }}</span>
        {{- end }}
      </div>
    </header>

    {{- if .Summary }}
    <p class="note-card__summary">{{ .Summary }}</p>
    {{- end }}

    <footer class="note-card__badges">
      {{/* Status badges */}}
      {{- range .Params.statuses }}
      {{- $statusClass := printf "badge--status-%s" (. | urlize) }}
      <a href="{{ "/statuses/" | relURL }}{{ . | urlize }}/" class="badge {{ $statusClass }}">
        {{ . }}
      </a>
      {{- end }}

      {{/* Domain badges */}}
      {{- range .Params.domains }}
      {{- $domainClass := printf "badge--domain-%s" (. | urlize) }}
      <a href="{{ "/domains/" | relURL }}{{ . | urlize }}/" class="badge {{ $domainClass }}">
        {{ . }}
      </a>
      {{- end }}

      {{/* Intent badges */}}
      {{- range .Params.intents }}
      {{- $intentClass := printf "badge--intent-%s" (. | urlize) }}
      <a href="{{ "/intents/" | relURL }}{{ . | urlize }}/" class="badge {{ $intentClass }}">
        {{ . }}
      </a>
      {{- end }}

      {{/* Tags */}}
      {{- range first 3 .Params.tags }}
      <span class="badge badge--default">#{{ . }}</span>
      {{- end }}
    </footer>
  </article>
  {{- end }}
</div>
{{- else }}
<div class="empty-state">
  <p>No content found in this category yet.</p>
</div>
{{- end }}

{{- end }}{{/* end main */}}
