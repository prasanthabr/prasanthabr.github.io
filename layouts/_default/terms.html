{{- define "main" }}

<header class="page-header">
  {{- partial "breadcrumbs.html" . }}
  <h1>{{ .Title | markdownify }}</h1>
  {{- if .Description }}
  <span class="post-description">{{ .Description | markdownify }}</span>
  {{- else }}
  <span class="post-description">Browse by {{ .Title }}</span>
  {{- end }}
</header>

{{- if .Content }}
<div class="post-content">
  {{ .Content }}
</div>
{{- end }}

{{- $taxonomy := .Data.Plural }}
<div class="taxonomy-grid">
  {{- range .Data.Terms.ByCount }}
  <a href="{{ .Page.Permalink }}" class="taxonomy-card">
    {{- $termClass := "" }}
    {{- if eq $taxonomy "statuses" }}
      {{- $termClass = printf "badge--status-%s" (.Page.Title | urlize) }}
    {{- else if eq $taxonomy "domains" }}
      {{- $termClass = printf "badge--domain-%s" (.Page.Title | urlize) }}
    {{- else if eq $taxonomy "intents" }}
      {{- $termClass = printf "badge--intent-%s" (.Page.Title | urlize) }}
    {{- end }}
    <span class="taxonomy-card__name {{ $termClass }}">{{ .Page.Title }}</span>
    <span class="taxonomy-card__count">{{ .Count }} {{ if eq .Count 1 }}item{{ else }}items{{ end }}</span>
  </a>
  {{- end }}
</div>

{{- end }}{{/* end main */}}
